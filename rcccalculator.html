<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RC Building Cost Calculator - Janasubha Construction P. Ltd.</title>
    
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Load Google Fonts: Playfair Display (Serif) and Inter (Sans-serif) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Playfair+Display:wght@700;800&display=swap" rel="stylesheet">
    
    <!-- AOS CSS for scroll animations -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    
    <!-- Chart.js for pie chart -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Custom Tailwind Configuration -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'sans': ['Inter', 'sans-serif'],
                        'serif': ['Playfair Display', 'serif'],
                    },
                    colors: {
                        'brand-primary': '#305350', // Dark Green
                        'brand-secondary': '#a7846a', // Brown
                        'brand-accent': '#ea9c26',  // Orange
                        'brand-bg-light': '#f5f5f5', // Light Gray
                        'brand-text': '#333333',   // Dark Grey for text
                    },
                    animation: {
                        'fadeIn': 'fadeIn 0.5s ease-in-out',
                        'slideUp': 'slideUp 0.5s ease-out',
                        'pulse-slow': 'pulse 3s infinite',
                        'float': 'float 6s ease-in-out infinite',
                        'bounce-in': 'bounceIn 0.8s ease-out',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        },
                        slideUp: {
                            '0%': { transform: 'translateY(20px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' },
                        },
                        float: {
                            '0%, 100%': { transform: 'translateY(0px)' },
                            '50%': { transform: 'translateY(-20px)' },
                        },
                        bounceIn: {
                            '0%': { transform: 'scale(0.3)', opacity: '0' },
                            '50%': { transform: 'scale(1.05)' },
                            '70%': { transform: 'scale(0.9)' },
                            '100%': { transform: 'scale(1)', opacity: '1' },
                        }
                    }
                }
            }
        }
    </script>
    
    <style>
        /* Base styling */
        body {
            font-family: 'Inter', sans-serif;
            color: #333333; /* brand-text */
        }
        
        /* Headers styling */
        h1, h2, h3, h4, h5, h6 {
            font-family: 'Playfair Display', serif;
            color: #305350; /* brand-primary */
        }
        
        /* Justify all text */
        p, .text-justify {
            text-align: justify;
        }

        /* Header scroll effect */
        .header-transparent {
            background-color: transparent;
            transition: all 0.3s ease-in-out;
        }
        .header-solid {
            background-color: white;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.07);
            transition: all 0.3s ease-in-out;
        }
        
        /* Language Selection Modal - Improved for mobile */
        .language-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(48, 83, 80, 0.98);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1001;
            transition: all 0.5s ease-in-out;
            padding: 1rem;
            overflow-y: auto;
        }
        
        .language-content {
            background: white;
            padding: 2rem;
            border-radius: 1rem;
            text-align: center;
            max-width: 500px;
            width: 100%;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
            animation: slideUp 0.5s ease-out;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        /* Mobile optimization */
        @media (max-width: 640px) {
            .language-content {
                padding: 1.5rem;
                max-height: 85vh;
                margin: auto;
            }
            
            .language-modal {
                padding: 0.5rem;
                align-items: flex-start;
                padding-top: 2rem;
            }
        }
        
        .language-buttons {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-top: 2rem;
            width: 100%;
        }
        
        @media (min-width: 640px) {
            .language-buttons {
                flex-direction: row;
                gap: 1.5rem;
            }
        }
        
        .language-btn {
            padding: 1.25rem 1.5rem;
            border: 2px solid #305350;
            border-radius: 0.75rem;
            background: white;
            color: #305350;
            font-weight: 600;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            flex: 1;
            min-height: 70px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        
        @media (max-width: 640px) {
            .language-btn {
                padding: 1rem;
                min-height: 60px;
                font-size: 1rem;
            }
        }
        
        .language-btn:hover {
            background: #305350;
            color: white;
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(48, 83, 80, 0.2);
        }
        
        .language-btn:active {
            transform: translateY(-1px);
        }
        
        .language-btn-primary {
            background: #305350;
            color: white;
        }
        
        .language-btn-primary:hover {
            background: #1a3a38;
        }
        
        .language-btn-text {
            display: block;
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 0.25rem;
        }
        
        .language-btn-subtext {
            display: block;
            font-size: 0.9rem;
            opacity: 0.8;
        }
        
        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* Form Styles - Full width on desktop */
        .calculator-form-container {
            width: 100%;
            margin: 0 auto;
            padding: 2rem;
            background: white;
            border-radius: 0.5rem;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        
        /* Desktop optimization */
        @media (min-width: 1024px) {
            .calculator-form-container {
                padding: 3rem;
            }
            
            .method-container {
                padding: 1.5rem 0;
            }
            
            .tab-content {
                padding: 2rem;
            }
        }
        
        @media (min-width: 1280px) {
            .calculator-form-container {
                padding: 3.5rem;
            }
        }
        
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: #305350;
        }
        
        .form-input {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #d1d5db;
            border-radius: 0.375rem;
            transition: border-color 0.3s ease;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #305350;
            box-shadow: 0 0 0 3px rgba(48, 83, 80, 0.1);
        }
        
        .submit-btn {
            width: 100%;
            padding: 0.75rem;
            background: #305350;
            color: white;
            border: none;
            border-radius: 0.375rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        
        .submit-btn:hover {
            background: #1a3a38;
        }
        
        .submit-btn:disabled {
            background: #305350;
            cursor: not-allowed;
            opacity: 0.8;
        }
        
        /* Success Message */
        .success-message {
            display: none;
            text-align: center;
            padding: 3rem;
            background: #f0f9f0;
            border-radius: 0.5rem;
            border: 1px solid #c6f6d5;
            color: #22543d;
            font-size: 1.125rem;
            font-weight: 500;
            margin-top: 2rem;
        }
        
        /* Improved Tab Styles - Full width */
        .tab-nav {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 2rem;
            background: #f8fafc;
            padding: 0.5rem;
            border-radius: 0.75rem;
        }
        
        /* Desktop: Better tab layout */
        @media (min-width: 768px) {
            .tab-nav {
                justify-content: space-between;
                gap: 0.75rem;
            }
        }
        
        .tab-button {
            flex: 1;
            min-width: 150px;
            padding: 1rem 1.5rem;
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 0.5rem;
            font-weight: 600;
            color: #666;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            font-size: 0.95rem;
            white-space: nowrap;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }
        
        /* Desktop: Larger tabs */
        @media (min-width: 1024px) {
            .tab-button {
                padding: 1.25rem 2rem;
                font-size: 1rem;
            }
        }
        
        .tab-button:hover {
            border-color: #305350;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        .tab-button.active {
            background: #305350;
            color: white;
            border-color: #305350;
            box-shadow: 0 4px 12px rgba(48, 83, 80, 0.2);
        }
        
        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease-in-out;
            padding: 1.5rem;
            border: 2px solid #f3f4f6;
            border-radius: 0.75rem;
            background: white;
        }
        
        /* Desktop: Larger content area */
        @media (min-width: 1024px) {
            .tab-content {
                padding: 2rem;
            }
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* Method-specific styling */
        .method-container {
            padding: 1rem 0;
        }
        
        .method-header {
            display: flex;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1.5rem;
            border-bottom: 2px solid #f3f4f6;
        }
        
        /* Desktop: Larger method header */
        @media (min-width: 1024px) {
            .method-header {
                margin-bottom: 2.5rem;
                padding-bottom: 2rem;
            }
        }
        
        .method-icon {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: #305350;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 1.5rem;
            font-weight: bold;
            font-size: 1.25rem;
            flex-shrink: 0;
        }
        
        .method-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: #305350;
            margin-bottom: 0.5rem;
        }
        
        /* Desktop grid optimization */
        @media (min-width: 768px) {
            .form-grid {
                display: grid;
                grid-template-columns: repeat(2, 1fr);
                gap: 2rem;
            }
            
            .form-grid-full {
                grid-column: 1 / -1;
            }
        }
        
        @media (min-width: 1024px) {
            .form-grid {
                grid-template-columns: repeat(3, 1fr);
                gap: 2.5rem;
            }
        }
        
        /* Result Section */
        .result-container {
            display: none;
            margin-top: 3rem;
            padding: 1.5rem;
            background: #f8fafc;
            border-radius: 0.75rem;
            border: 1px solid #e2e8f0;
        }
        
        @media (min-width: 768px) {
            .result-container {
                padding: 2rem;
            }
        }
        
        @media (min-width: 1024px) {
            .result-container {
                padding: 2.5rem;
                margin-top: 3.5rem;
            }
        }
        
        /* Results Grid Layout - Side by side on desktop */
        .results-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 2rem;
        }
        
        @media (min-width: 1024px) {
            .results-grid {
                grid-template-columns: 1fr 1fr;
                gap: 3rem;
                align-items: start;
            }
            
            .breakdown-section {
                order: 1;
            }
            
            .chart-section {
                order: 2;
                position: sticky;
                top: 2rem;
            }
        }
        
        /* Cost Breakdown Table - Better width management */
        .breakdown-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
            font-size: 0.875rem;
            table-layout: fixed;
        }
        
        @media (min-width: 640px) {
            .breakdown-table {
                font-size: 0.95rem;
            }
        }
        
        @media (min-width: 768px) {
            .breakdown-table {
                font-size: 1rem;
            }
        }
        
        .breakdown-table th,
        .breakdown-table td {
            border: 1px solid #e2e8f0;
            padding: 0.75rem 0.5rem;
            text-align: left;
            word-wrap: break-word;
        }
        
        .breakdown-table th:first-child,
        .breakdown-table td:first-child {
            width: 70%;
        }
        
        .breakdown-table th:last-child,
        .breakdown-table td:last-child {
            width: 30%;
            text-align: right;
        }
        
        @media (min-width: 768px) {
            .breakdown-table th,
            .breakdown-table td {
                padding: 0.875rem 1rem;
            }
            
            .breakdown-table th:first-child,
            .breakdown-table td:first-child {
                width: 75%;
            }
            
            .breakdown-table th:last-child,
            .breakdown-table td:last-child {
                width: 25%;
            }
        }
        
        @media (min-width: 1024px) {
            .breakdown-table th:first-child,
            .breakdown-table td:first-child {
                width: 70%;
            }
            
            .breakdown-table th:last-child,
            .breakdown-table td:last-child {
                width: 30%;
            }
        }
        
        /* Pie Chart Container - Better responsive sizing */
        .pie-chart-wrapper {
            background: white;
            border-radius: 1rem;
            padding: 1.5rem;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.05);
            border: 1px solid #e5e7eb;
            position: relative;
            overflow: hidden;
            max-width: 100%;
            margin: 0 auto;
        }
        
        @media (min-width: 640px) {
            .pie-chart-wrapper {
                padding: 2rem;
            }
        }
        
        @media (min-width: 768px) {
            .pie-chart-wrapper {
                padding: 2.5rem;
            }
        }
        
        .chart-container {
            position: relative;
            height: 250px;
            width: 100%;
            margin: 0 auto 2rem;
        }
        
        @media (min-width: 640px) {
            .chart-container {
                height: 300px;
            }
        }
        
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        
        @media (min-width: 1024px) {
            .chart-container {
                height: 280px;
                margin-bottom: 1.5rem;
            }
        }
        
        @media (min-width: 1280px) {
            .chart-container {
                height: 320px;
            }
        }
        
        /* Chart Legend - Better responsive layout */
        .chart-legend {
            display: grid;
            grid-template-columns: repeat(1, 1fr);
            gap: 0.75rem;
            margin-top: 1.5rem;
        }
        
        @media (min-width: 640px) {
            .chart-legend {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (min-width: 1024px) {
            .chart-legend {
                grid-template-columns: 1fr;
                gap: 0.625rem;
                margin-top: 1rem;
            }
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0.625rem 0.75rem;
            background: white;
            border-radius: 0.5rem;
            border: 1px solid #e5e7eb;
            font-size: 0.8rem;
            transition: all 0.3s ease;
            min-height: 44px;
        }
        
        @media (min-width: 640px) {
            .legend-item {
                font-size: 0.85rem;
                padding: 0.75rem 1rem;
            }
        }
        
        @media (min-width: 768px) {
            .legend-item {
                font-size: 0.9rem;
            }
        }
        
        @media (min-width: 1024px) {
            .legend-item {
                font-size: 0.85rem;
                padding: 0.625rem 0.75rem;
                min-height: 42px;
            }
        }
        
        @media (min-width: 1280px) {
            .legend-item {
                font-size: 0.9rem;
                padding: 0.75rem 1rem;
            }
        }
        
        .legend-info {
            display: flex;
            align-items: center;
            flex: 1;
            min-width: 0;
            margin-right: 0.5rem;
        }
        
        .legend-color {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 0.75rem;
            flex-shrink: 0;
        }
        
        @media (min-width: 640px) {
            .legend-color {
                width: 14px;
                height: 14px;
            }
        }
        
        .legend-name {
            flex: 1;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            font-weight: 500;
        }
        
        .legend-amount {
            font-weight: 600;
            color: #305350;
            font-size: 0.8rem;
            margin-left: 0.5rem;
            flex-shrink: 0;
        }
        
        @media (min-width: 640px) {
            .legend-amount {
                font-size: 0.85rem;
            }
        }
        
        @media (min-width: 768px) {
            .legend-amount {
                font-size: 0.9rem;
            }
        }
        
        /* Total Cost Display - Better for side-by-side layout */
        .total-cost-section {
            margin-top: 2rem;
            grid-column: 1 / -1;
        }
        
        @media (min-width: 1024px) {
            .total-cost-section {
                margin-top: 3rem;
            }
        }
        
        /* Spinner */
        .spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
            margin-right: 10px;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Room Dimensions Table - Better desktop view */
        .room-dimensions-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
            font-size: 0.95rem;
        }
        
        @media (min-width: 768px) {
            .room-dimensions-table {
                font-size: 1rem;
            }
        }
        
        @media (min-width: 1024px) {
            .room-dimensions-table {
                font-size: 1.05rem;
            }
        }
        
        .room-dimensions-table th,
        .room-dimensions-table td {
            border: 1px solid #e2e8f0;
            padding: 0.75rem;
            text-align: center;
        }
        
        @media (min-width: 768px) {
            .room-dimensions-table th,
            .room-dimensions-table td {
                padding: 1rem;
            }
        }
        
        .room-dimensions-table th {
            background-color: #f8fafc;
            font-weight: 600;
            color: #305350;
        }
        
        /* Validation error */
        .error-message {
            color: #e53e3e;
            font-size: 0.875rem;
            margin-top: 0.25rem;
            display: none;
        }
        
        .error-border {
            border-color: #e53e3e;
        }
        
        /* Prevent pie chart overflow */
        canvas {
            max-width: 100% !important;
            height: auto !important;
        }
        
        /* Loading Overlay */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0.9);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        
        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 6px solid #f3f3f3;
            border-top: 6px solid #305350;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        /* Contact Info Section - Better desktop layout */
        .contact-info-section {
            background: #f8fafc;
            padding: 2rem;
            border-radius: 0.75rem;
            border: 2px solid #e5e7eb;
            margin-top: 3rem;
        }
        
        @media (min-width: 768px) {
            .contact-info-section {
                padding: 2.5rem;
            }
        }
        
        .contact-info-section h3 {
            color: #305350;
            font-size: 1.5rem;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
        }
        
        .contact-info-section h3 svg {
            margin-right: 0.75rem;
            width: 1.5rem;
            height: 1.5rem;
        }
        
        /* Area Input Styles */
        .area-format-note {
            font-size: 0.875rem;
            color: #6b7280;
            margin-top: 0.25rem;
            line-height: 1.4;
        }
        
        /* Mobile optimizations */
        @media (max-width: 640px) {
            .calculator-form-container {
                padding: 1.5rem;
            }
            
            .tab-nav {
                padding: 0.25rem;
                gap: 0.25rem;
            }
            
            .tab-button {
                padding: 0.75rem 0.5rem;
                font-size: 0.85rem;
                min-width: 120px;
            }
            
            .tab-content {
                padding: 1rem;
            }
            
            .method-header {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .method-icon {
                margin-bottom: 1rem;
                margin-right: 0;
            }
            
            .contact-info-section {
                padding: 1.5rem;
            }
            
            .result-container {
                padding: 1rem;
            }
            
            .pie-chart-wrapper {
                padding: 1.25rem;
            }
            
            .chart-container {
                height: 220px;
            }
            
            .breakdown-table th,
            .breakdown-table td {
                padding: 0.5rem 0.375rem;
                font-size: 0.85rem;
            }
            
            .breakdown-table th:first-child,
            .breakdown-table td:first-child {
                width: 65%;
            }
            
            .breakdown-table th:last-child,
            .breakdown-table td:last-child {
                width: 35%;
            }
        }
        
        /* Better spacing for desktop */
        @media (min-width: 768px) {
            .form-group {
                margin-bottom: 1.75rem;
            }
        }
        
        /* Total Cost Display - Larger on desktop */
        @media (min-width: 1024px) {
            #total-cost {
                font-size: 2.5rem;
            }
        }
    </style>
</head>
<body class="bg-white">

    <!-- Language Selection Modal - Improved Design -->
    <div id="languageModal" class="language-modal">
        <div class="language-content">
            <!-- Logo -->
            <div class="mb-6 flex justify-center">
                <div class="flex items-center">
                    <img src="logo.png" alt="Janasubha Construction" class="h-12 mr-3">
                    <span class="text-2xl font-bold font-serif text-brand-primary">Janasubha Construction</span>
                </div>
            </div>
            
            <!-- Welcome Messages - Better spacing for mobile -->
            <div class="mb-6 space-y-4">
                <div>
                    <h2 class="text-xl md:text-2xl font-bold text-brand-primary mb-2">RC भवन लागत क्याल्कुलेटरमा स्वागत छ</h2>
                    <p class="text-sm md:text-base text-gray-600">तपाईंले यस फारम प्रयोग गरी निर्माण गर्न लाग्नुभएको RC भवनको लागत अनुमान सहज रूपमा प्राप्त गर्न सक्नुहुनेछ।</p>
                </div>
                
                <div class="pt-2 border-t border-gray-200">
                    <h2 class="text-xl md:text-2xl font-bold text-brand-primary mb-2">Welcome to RC Building Cost Calculator</h2>
                    <p class="text-sm md:text-base text-gray-600">By using this form, you will be able to easily obtain a cost estimate for the RC building you are planning to construct.</p>
                </div>
            </div>
            
            <!-- Language Selection Prompt -->
            <div class="mb-6">
                <p class="text-lg font-semibold text-brand-primary mb-2">कृपया भाषा चयन गर्नुहोस्</p>
                <p class="text-lg font-semibold text-brand-primary">Please select your preferred language</p>
            </div>
            
            <!-- Language Buttons - Better for mobile -->
            <div class="language-buttons">
                <button id="nepaliBtn" class="language-btn language-btn-primary">
                    <span class="language-btn-text">नेपाली</span>
                    <span class="language-btn-subtext">Nepali</span>
                </button>
                <button id="englishBtn" class="language-btn">
                    <span class="language-btn-text">English</span>
                    <span class="language-btn-subtext">अंग्रेजी</span>
                </button>
            </div>
            
            <!-- Instruction Note -->
            <div class="mt-6 pt-4 border-t border-gray-200">
                <p class="text-sm text-gray-500">
                    <svg class="w-4 h-4 inline-block mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    Select language to continue | भाषा चयन गरी अगाडि बढ्नुहोस्
                </p>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay">
        <div class="loading-spinner"></div>
    </div>

    <!-- Header & Navigation -->
    <header id="main-header" class="fixed top-0 left-0 right-0 z-50 py-4 header-solid" style="display: none;">
        <nav class="container mx-auto px-4 lg:px-8 flex justify-between items-center">
            <!-- Logo -->
            <a href="index.html" class="text-2xl lg:text-3xl font-bold font-serif text-brand-primary flex items-center">
                <img src="logo.png" alt="Janasubha Construction" class="h-10 lg:h-12 mr-3">
                Janasubha Construction
            </a>
            
            <!-- Desktop Nav -->
            <div class="hidden lg:flex space-x-8 xl:space-x-10 items-center">
                <a href="index.html#about" class="text-brand-primary hover:opacity-75 transition duration-300 nav-link">About</a>
                <a href="index.html#services" class="text-brand-primary hover:opacity-75 transition duration-300 nav-link">Services</a>
                <a href="index.html#projects" class="text-brand-primary hover:opacity-75 transition duration-300 nav-link">Projects</a>
                <a href="training.html" class="text-brand-primary hover:opacity-75 transition duration-300 nav-link">Training Registration</a>
                <a href="rcccalculator.html" class="text-brand-primary hover:opacity-75 transition duration-300 nav-link">RCC Calculator</a>
				<a href="calculator.html" class="text-brand-primary hover:opacity-75 transition duration-300 nav-link">Steel Calculator</a>
                <a href="index.html#contact" class="text-white bg-brand-accent px-6 py-2.5 rounded-full font-medium hover:opacity-90 transition duration-300">Contact Us</a>
            </div>
            
            <!-- Mobile Nav Button -->
            <div class="lg:hidden">
                <button id="mobile-nav-button" class="text-brand-primary focus:outline-none">
                    <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
                </button>
            </div>
        </nav>
        
        <!-- Mobile Nav Menu (hidden by default) -->
        <div id="mobile-nav" class="hidden lg:hidden bg-white shadow-lg mt-3">
            <a href="index.html#about" class="block px-6 py-4 text-brand-primary font-medium hover:bg-brand-bg-light">About</a>
            <a href="index.html#services" class="block px-6 py-4 text-brand-primary font-medium hover:bg-brand-bg-light">Services</a>
            <a href="index.html#projects" class="block px-6 py-4 text-brand-primary font-medium hover:bg-brand-bg-light">Projects</a>
            <a href="training.html" class="block px-6 py-4 text-brand-primary font-medium hover:bg-brand-bg-light">Training Registration</a>
            <a href="rcccalculator.html" class="block px-6 py-4 text-brand-primary font-medium hover:bg-brand-bg-light">RCC Calculator</a>
			<a href="calculator.html" class="block px-6 py-4 text-brand-primary font-medium hover:bg-brand-bg-light">Steel Calculator</a>
            <a href="index.html#contact" class="block px-6 py-4 text-brand-primary font-medium hover:bg-brand-bg-light">Contact Us</a>
        </div>
    </header>

    <main class="pt-24" style="display: none;">
        <!-- Advanced Calculator Section - Full width on desktop -->
        <section class="py-16 lg:py-24 bg-brand-bg-light">
            <div class="container mx-auto px-4 lg:px-8 xl:px-12">
                <div class="text-center mb-12 lg:mb-16" data-aos="fade-up">
                    <span class="text-brand-primary font-semibold tracking-widest uppercase text-sm lg:text-base" id="form-subtitle">RC Building Cost Calculator</span>
                    <h1 class="text-3xl lg:text-4xl xl:text-5xl font-bold mt-3 lg:mt-4" id="form-title">Building Cost Calculator</h1>
                    <p class="text-base lg:text-lg xl:text-xl text-gray-600 mt-3 lg:mt-4 max-w-3xl xl:max-w-4xl mx-auto text-center" id="form-description">Choose your preferred method to calculate the construction cost for your dream home.</p>
                </div>
                
                <!-- Success Message -->
                <div id="success-message" class="success-message" style="display: none;">
                    <h3 class="text-2xl font-bold mb-4" id="success-title">Thank You!</h3>
                    <p id="success-message-1">Thank you for your response. Your input is recorded.</p>
                    <p id="success-message-2">You will be contacted soon.</p>
                    <p class="mt-4" id="success-contact">For queries, contact: <strong>+977-9763683288</strong></p>
                    <p class="mt-6 text-sm" id="success-redirect">Redirecting to homepage in <span id="countdown">5</span> seconds...</p>
                </div>
                
                <!-- Hidden language field -->
                <input type="hidden" id="languageField" name="language" value="en">
                
                <!-- Full width calculator form -->
                <div class="calculator-form-container" data-aos="fade-up" data-aos-delay="100" id="main-form-container">
                    <!-- Calculation Method Tabs -->
                    <div class="tab-nav">
                        <button class="tab-button active" data-tab="method1" id="tab-button-1">
                            <div class="flex flex-col items-center">
                                <span class="font-bold" id="tab-1-title">Simple Method</span>
                                <span class="text-xs mt-1" id="tab-1-subtitle">Direct Area Input</span>
                            </div>
                        </button>
                        <button class="tab-button" data-tab="method2" id="tab-button-2">
                            <div class="flex flex-col items-center">
                                <span class="font-bold" id="tab-2-title">Land Area Method</span>
                                <span class="text-xs mt-1" id="tab-2-subtitle">Land + Coverage + Stories</span>
                            </div>
                        </button>
                        <button class="tab-button" data-tab="method3" id="tab-button-3">
                            <div class="flex flex-col items-center">
                                <span class="font-bold" id="tab-3-title">Detailed Room Method</span>
                                <span class="text-xs mt-1" id="tab-3-subtitle">Room-by-Room Calculation</span>
                            </div>
                        </button>
                    </div>
                    
                    <!-- Method 1: Simple Method -->
                    <div id="method1" class="tab-content active">
                        <div class="method-container">
                            <div class="method-header">
                                <div class="method-icon">1</div>
                                <div>
                                    <div class="method-title" id="method1-title">Simple Method - Direct Area Input</div>
                                    <p class="text-gray-600 lg:text-lg" id="method1-description">Enter the total built-up area directly for quick estimation</p>
                                </div>
                            </div>
                            
                            <form id="simpleMethodForm">
                                <div class="form-grid">
                                    <div class="form-group">
                                        <label for="simple-total-area" class="text-base lg:text-lg" id="label-simple-area">Total built-up Area *</label>
                                        <input type="text" id="simple-total-area" class="form-input text-base lg:text-lg" placeholder="e.g., 1500" required>
                                        <div id="simple-total-area-error" class="error-message"></div>
                                        <p class="area-format-note lg:text-base" id="note-simple-area">Enter area in sq.ft.</p>
                                    </div>
                                    <div class="form-group">
                                        <label for="simple-quality" class="text-base lg:text-lg" id="label-simple-quality">Quality of Finishing *</label>
                                        <select id="simple-quality" class="form-input text-base lg:text-lg" required>
                                            <option value="">Select Quality</option>
                                            <option value="1">Simple</option>
                                            <option value="2">Intermediate</option>
                                            <option value="3">Luxury</option>
                                        </select>
                                        <div id="simple-quality-error" class="error-message"></div>
                                    </div>
                                    <div class="form-group">
                                        <label for="simple-finishing" class="text-base lg:text-lg" id="label-simple-finishing">Finishing Type *</label>
                                        <select id="simple-finishing" class="form-input text-base lg:text-lg" required>
                                            <option value="">Select Finishing Type</option>
                                            <option value="1">Civil Works Only</option>
                                            <option value="2">Semi-Furnished</option>
                                            <option value="3">Fully Furnished</option>
                                        </select>
                                        <div id="simple-finishing-error" class="error-message"></div>
                                    </div>
                                </div>
                                <div class="mt-8">
                                    <p class="text-sm lg:text-base text-gray-500" id="required-note">* Required fields</p>
                                </div>
                            </form>
                        </div>
                    </div>
                    
                    <!-- Method 2: Land Area Method -->
                    <div id="method2" class="tab-content">
                        <div class="method-container">
                            <div class="method-header">
                                <div class="method-icon">2</div>
                                <div>
                                    <div class="method-title" id="method2-title">Land Area Method - From Land Details</div>
                                    <p class="text-gray-600 lg:text-lg" id="method2-description">Calculate based on land area, coverage percentage, and number of stories</p>
                                </div>
                            </div>
                            
                            <form id="landMethodForm">
                                <div class="form-grid">
                                    <div class="form-group">
                                        <label for="land-area" class="text-base lg:text-lg" id="label-land-area">Land Area *</label>
                                        <input type="text" id="land-area" class="form-input text-base lg:text-lg" placeholder="e.g., 1500 or 1-2-3-4 (R-A-P-D)" required>
                                        <div id="land-area-error" class="error-message"></div>
                                        <p class="area-format-note lg:text-base" id="note-land-area">Enter in sq.ft. or R-A-P-D format (Ropani-Ana-Paisa-Dam)</p>
                                    </div>
                                    <div class="form-group">
                                        <label for="coverage-percentage" class="text-base lg:text-lg" id="label-coverage">Coverage Percentage (%) *</label>
                                        <input type="number" id="coverage-percentage" class="form-input text-base lg:text-lg" min="10" max="90" placeholder="e.g., 60" required>
                                        <p class="text-sm lg:text-base text-gray-500 mt-1" id="note-coverage">Percentage of land covered by building (10-90%)</p>
                                        <div id="coverage-percentage-error" class="error-message"></div>
                                    </div>
                                    <div class="form-group">
                                        <label for="num-stories" class="text-base lg:text-lg" id="label-stories">Number of Stories *</label>
                                        <input type="number" id="num-stories" class="form-input text-base lg:text-lg" min="1" max="10" placeholder="e.g., 2" required>
                                        <div id="num-stories-error" class="error-message"></div>
                                    </div>
                                    <div class="form-group form-grid-full">
                                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 lg:gap-8">
                                            <div>
                                                <label for="land-quality" class="text-base lg:text-lg" id="label-land-quality">Quality of Finishing *</label>
                                                <select id="land-quality" class="form-input text-base lg:text-lg" required>
                                                    <option value="">Select Quality</option>
                                                    <option value="1">Simple</option>
                                                    <option value="2">Intermediate</option>
                                                    <option value="3">Luxury</option>
                                                </select>
                                                <div id="land-quality-error" class="error-message"></div>
                                            </div>
                                            <div>
                                                <label for="land-finishing" class="text-base lg:text-lg" id="label-land-finishing">Finishing Type *</label>
                                                <select id="land-finishing" class="form-input text-base lg:text-lg" required>
                                                    <option value="">Select Finishing Type</option>
                                                    <option value="1">Civil Works Only</option>
                                                    <option value="2">Semi-Furnished</option>
                                                    <option value="3">Fully Furnished</option>
                                                </select>
                                                <div id="land-finishing-error" class="error-message"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="mt-8">
                                    <p class="text-sm lg:text-base text-gray-500" id="required-note-2">* Required fields</p>
                                </div>
                            </form>
                        </div>
                    </div>
                    
                    <!-- Method 3: Detailed Room Method -->
                    <div id="method3" class="tab-content">
                        <div class="method-container">
                            <div class="method-header">
                                <div class="method-icon">3</div>
                                <div>
                                    <div class="method-title" id="method3-title">Detailed Room Method - Room-by-Room</div>
                                    <p class="text-gray-600 lg:text-lg" id="method3-description">Enter detailed room dimensions for precise calculation</p>
                                </div>
                            </div>
                            
                            <form id="detailedMethodForm">
                                <!-- Stories input for detailed method -->
                                <div class="mb-8 lg:mb-10">
                                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 lg:gap-8">
                                        <div class="form-group">
                                            <label for="detailed-stories" class="text-base lg:text-lg" id="label-detailed-stories">Number of Stories *</label>
                                            <input type="number" id="detailed-stories" class="form-input text-base lg:text-lg" min="1" max="10" placeholder="e.g., 2" required>
                                            <div id="detailed-stories-error" class="error-message"></div>
                                            <p class="text-sm lg:text-base text-gray-500 mt-1" id="note-detailed-stories">Used for staircase area calculation</p>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Room Count Inputs -->
                                <div class="mb-8 lg:mb-10">
                                    <h3 class="text-lg lg:text-xl font-semibold mb-4 lg:mb-6 text-brand-primary" id="room-count-title">Number of Rooms</h3>
                                    <div class="grid grid-cols-2 sm:grid-cols-4 gap-4 lg:gap-6">
                                        <div class="form-group">
                                            <label for="bedroom-count" class="text-sm lg:text-base" id="label-bedroom">Bedrooms</label>
                                            <input type="number" id="bedroom-count" class="form-input text-base" min="0" value="2">
                                        </div>
                                        <div class="form-group">
                                            <label for="kitchen-count" class="text-sm lg:text-base" id="label-kitchen">Kitchens</label>
                                            <input type="number" id="kitchen-count" class="form-input text-base" min="0" value="1">
                                        </div>
                                        <div class="form-group">
                                            <label for="livingroom-count" class="text-sm lg:text-base" id="label-livingroom">Living Rooms</label>
                                            <input type="number" id="livingroom-count" class="form-input text-base" min="0" value="1">
                                        </div>
                                        <div class="form-group">
                                            <label for="guestroom-count" class="text-sm lg:text-base" id="label-guestroom">Guest Rooms</label>
                                            <input type="number" id="guestroom-count" class="form-input text-base" min="0" value="0">
                                        </div>
                                        <div class="form-group">
                                            <label for="toilet-count" class="text-sm lg:text-base" id="label-toilet">Toilets</label>
                                            <input type="number" id="toilet-count" class="form-input text-base" min="0" value="2">
                                        </div>
                                        <div class="form-group">
                                            <label for="pujaroom-count" class="text-sm lg:text-base" id="label-pujaroom">Puja Rooms</label>
                                            <input type="number" id="pujaroom-count" class="form-input text-base" min="0" value="0">
                                        </div>
                                        <div class="form-group">
                                            <label for="staircase-count" class="text-sm lg:text-base" id="label-staircase">Staircases</label>
                                            <input type="number" id="staircase-count" class="form-input text-base" min="0" value="1">
                                        </div>
                                        <div class="form-group">
                                            <label for="passage-count" class="text-sm lg:text-base" id="label-passage">Passage Ways</label>
                                            <input type="number" id="passage-count" class="form-input text-base" min="0" value="1">
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Room Dimensions Table -->
                                <div class="mb-8 lg:mb-10">
                                    <h3 class="text-lg lg:text-xl font-semibold mb-4 lg:mb-6 text-brand-primary" id="room-dimensions-title">Room Dimensions (in feet)</h3>
                                    <div class="overflow-x-auto">
                                        <table class="room-dimensions-table">
                                            <thead>
                                                <tr>
                                                    <th id="table-header-room">Room Type</th>
                                                    <th id="table-header-length">Length (ft)</th>
                                                    <th id="table-header-breadth">Breadth (ft)</th>
                                                    <th id="table-header-area">Area (sq.ft.)</th>
                                                </tr>
                                            </thead>
                                            <tbody id="room-dimensions-body">
                                                <!-- Filled by JavaScript -->
                                            </tbody>
                                            <tfoot>
                                                <tr>
                                                    <td colspan="3" class="text-right font-semibold text-base lg:text-lg" id="total-area-label">Total Area:</td>
                                                    <td id="total-detailed-area" class="font-bold text-brand-primary text-base lg:text-lg">0 sq.ft.</td>
                                                </tr>
                                            </tfoot>
                                        </table>
                                    </div>
                                    <p class="text-sm lg:text-base text-gray-500 mt-2 lg:mt-3" id="staircase-note">Note: Staircase area is calculated as Length × Breadth × Number of Stories</p>
                                </div>
                                
                                <!-- Quality and Finishing Options -->
                                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 lg:gap-8">
                                    <div class="form-group">
                                        <label for="detailed-quality" class="text-base lg:text-lg" id="label-detailed-quality">Quality of Finishing *</label>
                                        <select id="detailed-quality" class="form-input text-base lg:text-lg" required>
                                            <option value="">Select Quality</option>
                                            <option value="1">Simple</option>
                                            <option value="2">Intermediate</option>
                                            <option value="3">Luxury</option>
                                        </select>
                                        <div id="detailed-quality-error" class="error-message"></div>
                                    </div>
                                    <div class="form-group">
                                        <label for="detailed-finishing" class="text-base lg:text-lg" id="label-detailed-finishing">Finishing Type *</label>
                                        <select id="detailed-finishing" class="form-input text-base lg:text-lg" required>
                                            <option value="">Select Finishing Type</option>
                                            <option value="1">Civil Works Only</option>
                                            <option value="2">Semi-Furnished</option>
                                            <option value="3">Fully Furnished</option>
                                        </select>
                                        <div id="detailed-finishing-error" class="error-message"></div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                    
                    <!-- Contact Information Section -->
                    <div class="contact-info-section">
                        <h3>
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                            </svg>
                            <span id="contact-info-title">Contact Information (Optional)</span>
                        </h3>
                        <p class="text-gray-600 mb-6 text-base lg:text-lg" id="contact-info-description">Provide your details if you'd like us to contact you for detailed consultation</p>
                        
                        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 lg:gap-8">
                            <div class="form-group">
                                <label for="user-name" class="text-base lg:text-lg" id="label-user-name">Your Name</label>
                                <input type="text" id="user-name" class="form-input text-base lg:text-lg" placeholder="John Doe">
                            </div>
                            <div class="form-group">
                                <label for="user-email" class="text-base lg:text-lg" id="label-user-email">Email Address</label>
                                <input type="email" id="user-email" class="form-input text-base lg:text-lg" placeholder="john@example.com">
                            </div>
                            <div class="form-group">
                                <label for="user-phone" class="text-base lg:text-lg" id="label-user-phone">Phone Number</label>
                                <input type="tel" id="user-phone" class="form-input text-base lg:text-lg" pattern="[0-9]{7,15}" placeholder="+977-XXXXXXXXXX">
                            </div>
                        </div>
                    </div>
                    
                    <!-- Calculate Button -->
                    <div class="mt-10 lg:mt-12">
                        <button type="button" id="calculate-btn" class="submit-btn text-base lg:text-lg py-3 lg:py-4">
                            Calculate Cost
                        </button>
                        
                        <!-- Validation Error for Common Fields -->
                        <div id="common-error" class="error-message mt-2 text-center"></div>
                    </div>
                    
                    <!-- Results Section -->
                    <div id="result-container" class="result-container">
                        <div class="text-center mb-8 lg:mb-10">
                            <h2 class="text-2xl lg:text-3xl xl:text-4xl font-bold text-brand-primary" id="result-title">Cost Breakdown</h2>
                            <p class="text-gray-600 mt-4 text-base lg:text-lg" id="result-description">Estimated construction cost for your project</p>
                        </div>
                        
                        <div class="results-grid">
                            <!-- Left Column: Breakdown Table (Desktop) -->
                            <div class="breakdown-section">
                                <h3 class="text-xl lg:text-2xl font-semibold mb-4 lg:mb-6" id="breakdown-title">Detailed Cost Breakdown</h3>
                                <div class="overflow-x-auto">
                                    <table class="breakdown-table">
                                        <thead>
                                            <tr>
                                                <th id="table-header-item">Item Description</th>
                                                <th id="table-header-amount">Amount (NRs)</th>
                                            </tr>
                                        </thead>
                                        <tbody id="detailed-breakdown-body">
                                            <!-- Filled by JavaScript -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            
                            <!-- Right Column: Pie Chart (Desktop) -->
                            <div class="chart-section">
                                <h3 class="text-xl lg:text-2xl font-semibold mb-4 lg:mb-6" id="chart-title">Cost Distribution</h3>
                                <div class="pie-chart-wrapper">
                                    <div class="chart-container">
                                        <canvas id="costPieChart"></canvas>
                                    </div>
                                    <div class="chart-legend" id="chart-legend"></div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Total Cost Summary (Full width below both columns) -->
                        <div class="total-cost-section">
                            <div class="mt-6 p-4 lg:p-6 bg-brand-primary text-white rounded-lg">
                                <div class="flex flex-col sm:flex-row justify-between items-center">
                                    <span class="text-lg lg:text-xl font-semibold mb-2 sm:mb-0" id="total-label">Total Estimated Cost:</span>
                                    <span id="total-cost" class="text-2xl lg:text-3xl xl:text-4xl font-bold">NRs. 0</span>
                                </div>
                                <p class="text-sm lg:text-base mt-2 lg:mt-3 opacity-90 text-center sm:text-left" id="total-note">* This is an approximate estimate. Final cost may vary based on actual requirements and market conditions.</p>
                            </div>
                        </div>
                        
                        <!-- Contact Information -->
                        <div class="mt-8 lg:mt-10 p-4 lg:p-6 bg-yellow-50 border border-yellow-200 rounded-lg">
                            <h4 class="text-lg lg:text-xl font-semibold text-yellow-800 mb-2 lg:mb-3" id="next-steps-title">Next Steps</h4>
                            <p class="text-yellow-700 text-base lg:text-lg" id="next-steps-description">For detailed design, planning and construction services, contact our experts:</p>
                            <div class="mt-3 lg:mt-4 flex flex-col sm:flex-row flex-wrap gap-3 lg:gap-6">
                                <a href="tel:+9779763683288" class="inline-flex items-center text-brand-primary hover:text-brand-secondary text-base lg:text-lg">
                                    <svg class="w-5 h-5 lg:w-6 lg:h-6 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path></svg>
                                    +977-9763683288
                                </a>
                                <a href="mailto:janasubhaconstruction@gmail.com" class="inline-flex items-center text-brand-primary hover:text-brand-secondary text-base lg:text-lg">
                                    <svg class="w-5 h-5 lg:w-6 lg:h-6 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg>
                                    janasubhaconstruction@gmail.com
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-brand-primary text-gray-100" style="display: none;">
        <div class="container mx-auto px-6 lg:px-8 xl:px-12 py-16">
            <div class="grid grid-cols-1 lg:grid-cols-4 gap-12">
                <!-- Footer Column 1: Brand -->
                <div>
                    <a href="index.html" class="text-2xl lg:text-3xl font-bold font-serif text-white flex items-center">
                        <img src="logo.png" alt="Janasubha Construction" class="h-10 lg:h-12 mr-3">
                        Janasubha Construction
                    </a>
                    <p class="mt-4 text-gray-300 text-justify text-base lg:text-lg">Turning your dreams to reality. Come, #DiscoverNewHorizon with us.</p>
                </div>
                
                <!-- Footer Column 2: Links -->
                <div>
                    <h4 class="text-lg lg:text-xl font-semibold text-white mb-4 lg:mb-6">Quick Links</h4>
                    <ul class="space-y-2 lg:space-y-3">
                        <li><a href="index.html#about" class="hover:text-white transition duration-300 text-base lg:text-lg">About Us</a></li>
                        <li><a href="index.html#services" class="hover:text-white transition duration-300 text-base lg:text-lg">Services</a></li>
                        <li><a href="index.html#projects" class="hover:text-white transition duration-300 text-base lg:text-lg">Projects</a></li>
                        <li><a href="training.html" class="hover:text-white transition duration-300 text-base lg:text-lg">Training Registration</a></li>
                        <li><a href="rcccalculator.html" class="hover:text-white transition duration-300 text-base lg:text-lg">RCC Calculator</a></li>
						<li><a href="calculator.html" class="hover:text-white transition duration-300 text-base lg:text-lg">Steel Calculator</a></li>
                        <li><a href="index.html#contact" class="hover:text-white transition duration-300 text-base lg:text-lg">Contact</a></li>
                    </ul>
                </div>
                
                <!-- Footer Column 3: Services -->
                <div>
                    <h4 class="text-lg lg:text-xl font-semibold text-white mb-4 lg:mb-6">Our Services</h4>
                    <ul class="space-y-2 lg:space-y-3">
                        <li><a href="index.html#services" class="hover:text-white transition duration-300 text-base lg:text-lg">Building Construction</a></li>
                        <li><a href="index.html#services" class="hover:text-white transition duration-300 text-base lg:text-lg">Design Services</a></li>
                        <li><a href="index.html#services" class="hover:text-white transition duration-300 text-base lg:text-lg">Site Supervision</a></li>
                        <li><a href="index.html#services" class="hover:text-white transition duration-300 text-base lg:text-lg">Consultation</a></li>
						<li><a href="index.html#services" class="hover:text-white transition duration-300 text-base lg:text-lg">Training</a></li>
                    </ul>
                </div>
                
                <!-- Footer Column 4: Contact -->
                <div>
                    <h4 class="text-lg lg:text-xl font-semibold text-white mb-4 lg:mb-6">Get in Touch</h4>
                    <ul class="space-y-3 lg:space-y-4">
                        <li class="flex items-start">
                            <span class="mt-1 mr-2 flex-shrink-0"><svg class="w-5 h-5 lg:w-6 lg:h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg></span>
                            <a href="https://maps.app.goo.gl/CYLKa1cHa6hmh6PM9" target="_blank" rel="noopener noreferrer" class="hover:text-white transition text-base lg:text-lg">
                                Chandragiri Municipality-08, Dhaksi, Kathmandu, Nepal
                            </a>
                        </li>
                        <li class="flex items-center">
                            <span class="mr-2"><svg class="w-5 h-5 lg:w-6 lg:h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path></svg></span>
                            <a href="tel:+9779763683288" class="hover:text-white transition text-base lg:text-lg">+977-9763683288</a>
                        </li>
                        <li class="flex items-center">
                            <span class="mr-2"><svg class="w-5 h-5 lg:w-6 lg:h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg></span>
                            <a href="mailto:janasubhaconstruction@gmail.com" class="hover:text-white transition text-base lg:text-lg">janasubhaconstruction@gmail.com</a>
                        </li>
                    </ul>
                </div>
            </div>
            
            <hr class="border-t border-gray-700 my-10 lg:my-12">
            
            <div class="flex flex-col lg:flex-row justify-between items-center text-center lg:text-left">
                <p class="text-gray-300 text-base lg:text-lg">&copy; <span id="current-year"></span> Janasubha Construction Pvt. Ltd. All Rights Reserved.</p>
                <div class="flex space-x-5 lg:space-x-6 mt-4 lg:mt-0">
                    <!-- Social Links -->
                    <a href="https://api.whatsapp.com/message/BJWP6MPZRG32O1" target="_blank" rel="noopener noreferrer" class="text-gray-300 hover:text-white transition duration-300">
                        <img src="whatsapp.png" alt="WhatsApp" class="w-6 h-6 lg:w-7 lg:h-7">
                    </a>
                    <a href="https://www.instagram.com/janasubhaconstruction/#" target="_blank" rel="noopener noreferrer" class="text-gray-300 hover:text-white transition duration-300">
                        <img src="instagram.png" alt="Instagram" class="w-6 h-6 lg:w-7 lg:h-7">
                    </a>
                    <a href="https://www.tiktok.com/@janasubha_123" target="_blank" rel="noopener noreferrer" class="text-gray-300 hover:text-white transition duration-300">
                        <img src="tiktok.png" alt="TikTok" class="w-6 h-6 lg:w-7 lg:h-7">
                    </a>
					<a href="https://www.linkedin.com/in/janasubha-construction-6a7133391" target="_blank" rel="noopener noreferrer" class="text-gray-300 hover:text-white transition duration-300">
                        <img src="linkedin.png" alt="LinkedIn" class="w-6 h-6 lg:w-7 lg:h-7">
                    </a>
                </div>
            </div>
        </div>
    </footer>

    <!-- AOS JS for scroll animations -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    
    <script>
        // Language data
        const translations = {
            en: {
                // Form Section
                formSubtitle: "RC Building Cost Calculator",
                formTitle: "Building Cost Calculator",
                formDescription: "Choose your preferred method to calculate the construction cost for your dream home.",
                
                // Tabs
                tab1Title: "Simple Method",
                tab1Subtitle: "Direct Area Input",
                tab2Title: "Land Area Method",
                tab2Subtitle: "Land + Coverage + Stories",
                tab3Title: "Detailed Room Method",
                tab3Subtitle: "Room-by-Room Calculation",
                
                // Method 1
                method1Title: "Simple Method - Direct Area Input",
                method1Description: "Enter the total built-up area directly for quick estimation",
                labelSimpleArea: "Total built-up Area *",
                noteSimpleArea: "Enter area in sq.ft.",
                labelSimpleQuality: "Quality of Finishing *",
                labelSimpleFinishing: "Finishing Type *",
                errorSimpleArea: "Please enter a valid area (minimum 100 sq.ft. or valid R-A-P-D format)",
                errorSimpleQuality: "Please select quality of finishing",
                errorSimpleFinishing: "Please select finishing type",
                
                // Method 2
                method2Title: "Land Area Method - From Land Details",
                method2Description: "Calculate based on land area, coverage percentage, and number of stories",
                labelLandArea: "Land Area *",
                noteLandArea: "Enter in sq.ft. or R-A-P-D format (Ropani-Ana-Paisa-Dam)",
                labelCoverage: "Coverage Percentage (%) *",
                noteCoverage: "Percentage of land covered by building (10-90%)",
                labelStories: "Number of Stories *",
                labelLandQuality: "Quality of Finishing *",
                labelLandFinishing: "Finishing Type *",
                errorLandArea: "Please enter a valid land area (minimum 100 sq.ft. or valid R-A-P-D format)",
                errorCoverage: "Please enter coverage between 10-90%",
                errorStories: "Please enter number of stories (1-10)",
                errorLandQuality: "Please select quality of finishing",
                errorLandFinishing: "Please select finishing type",
                
                // Method 3
                method3Title: "Detailed Room Method - Room-by-Room",
                method3Description: "Enter detailed room dimensions for precise calculation",
                labelDetailedStories: "Number of Stories *",
                noteDetailedStories: "Used for staircase area calculation",
                roomCountTitle: "Number of Rooms",
                labelBedroom: "Bedrooms",
                labelKitchen: "Kitchens",
                labelLivingroom: "Living Rooms",
                labelGuestroom: "Guest Rooms",
                labelToilet: "Toilets",
                labelPujaroom: "Puja Rooms",
                labelStaircase: "Staircases",
                labelPassage: "Passage Ways",
                roomDimensionsTitle: "Room Dimensions (in feet)",
                tableHeaderRoom: "Room Type",
                tableHeaderLength: "Length (ft)",
                tableHeaderBreadth: "Breadth (ft)",
                tableHeaderArea: "Area (sq.ft.)",
                totalAreaLabel: "Total Area:",
                staircaseNote: "Note: Staircase area is calculated as Length × Breadth × Number of Stories",
                labelDetailedQuality: "Quality of Finishing *",
                labelDetailedFinishing: "Finishing Type *",
                errorDetailedStories: "Please enter number of stories (1-10)",
                errorDetailedQuality: "Please select quality of finishing",
                errorDetailedFinishing: "Please select finishing type",
                errorCommon: "Please add at least one room with valid dimensions",
                
                // Contact Information
                contactInfoTitle: "Contact Information (Optional)",
                contactInfoDescription: "Provide your details if you'd like us to contact you for detailed consultation",
                labelUserName: "Your Name",
                labelUserEmail: "Email Address",
                labelUserPhone: "Phone Number",
                
                // Buttons and Notes
                requiredNote: "* Required fields",
                calculateBtn: "Calculate Cost",
                calculatingBtn: "Calculating...",
                
                // Results Section
                resultTitle: "Cost Breakdown",
                resultDescription: "Estimated construction cost for your project",
                breakdownTitle: "Detailed Cost Breakdown",
                tableHeaderItem: "Item Description",
                tableHeaderAmount: "Amount (NRs)",
                chartTitle: "Cost Distribution",
                totalLabel: "Total Estimated Cost:",
                totalNote: "* This is an approximate estimate. Final cost may vary based on actual requirements and market conditions.",
                nextStepsTitle: "Next Steps",
                nextStepsDescription: "For detailed design, planning and construction services, contact our experts:",
                
                // Success Message
                successTitle: "Thank You!",
                successMessage1: "Thank you for your response. Your input is recorded.",
                successMessage2: "You will be contacted soon.",
                successContact: "For queries, contact: ",
                successRedirect: "Redirecting to homepage in ",
                
                // Calculation Table Items - English
                calculationItems: {
                    "Preliminary consultation upto Naksa Pass": "Preliminary consultation upto Naksa Pass",
                    "Municipal work Charge": "Municipal work Charge",
                    "Site Clearance": "Site Clearance",
                    "Excavation works": "Excavation works",
                    "Back Fill in Excavated Area and Soil Management Cost": "Back Fill in Excavated Area and Soil Management Cost",
                    "Compaction Works in foundations": "Compaction Works in foundations",
                    "Brick Soling in Footing and GF Level": "Brick Soling in Footing and GF Level",
                    "PCC Works in Footing and GF Level": "PCC Works in Footing and GF Level",
                    "M20 concrete": "M20 concrete",
                    "Reinforcement": "Reinforcement",
                    "Shuttering Works": "Shuttering Works",
                    "Door/window (wooden)": "Door/window (wooden)",
                    "Windows (UPVC)": "Windows (UPVC)",
                    "Brick Masonary": "Brick Masonary",
                    "Plaster Works": "Plaster Works",
                    "Screeding": "Screeding",
                    "Boundary Wall": "Boundary Wall",
                    "Painting Works": "Painting Works",
                    "Granite in Staircase and Others": "Granite in Staircase and Others",
                    "Tile in Kitchen, Terrace and Varandha": "Tile in Kitchen, Terrace and Varandha",
                    "Over Head Watertank and stand": "Over Head Watertank and stand",
                    "Underground water tank (10000 ltr)": "Underground water tank (10000 ltr)",
                    "Railing": "Railing",
                    "Metal Stair": "Metal Stair",
                    "Main Gate": "Main Gate",
                    "Septic Tank and Soak Pit": "Septic Tank and Soak Pit",
                    "False Ceiling": "False Ceiling",
                    "Electrical fittings": "Electrical fittings",
                    "Sanitary pipes and fittings": "Sanitary pipes and fittings",
                    "Internal Furnishing": "Internal Furnishing"
                },
                
                // Pie Chart Categories - English
                pieChartCategories: {
                    "Design and Naksa Pass": "Design and Naksa Pass",
                    "Civil Works": "Civil Works",
                    "Painting Works": "Painting Works",
                    "Tile/Granite": "Tile/Granite",
                    "Water Tank": "Water Tank",
                    "Metal Works": "Metal Works",
                    "Septic Tank/Soak Pit": "Septic Tank/Soak Pit",
                    "False Ceiling": "False Ceiling",
                    "Electrical Works": "Electrical Works",
                    "Sanitary Works": "Sanitary Works",
                    "Furnishing Works": "Furnishing Works"
                },
                
                // Dropdown options - English
                qualityOptions: {
                    "1": "Simple",
                    "2": "Intermediate",
                    "3": "Luxury"
                },
                
                finishingOptions: {
                    "1": "Civil Works Only",
                    "2": "Semi-Furnished",
                    "3": "Fully Furnished"
                }
            },
            ne: {
                // Form Section
                formSubtitle: "RC भवन लागत क्याल्कुलेटर",
                formTitle: "भवन लागत क्याल्कुलेटर",
                formDescription: "तपाईंको सपनाको घरको निर्माण लागत गणना गर्न तपाईंले मनपर्ने विधि चयन गर्नुहोस्।",
                
                // Tabs
                tab1Title: "सरल विधि",
                tab1Subtitle: "प्रत्यक्ष क्षेत्रफल इनपुट",
                tab2Title: "जग्गा क्षेत्र विधि",
                tab2Subtitle: "जग्गा + कभरेज + तल्ला",
                tab3Title: "विस्तृत कोठा विधि",
                tab3Subtitle: "कोठा-दर-कोठा गणना",
                
                // Method 1
                method1Title: "सरल विधि - प्रत्यक्ष क्षेत्रफल इनपुट",
                method1Description: "द्रुत अनुमानको लागि कुल तल्ला क्षेत्रफल प्रत्यक्ष रूपमा प्रविष्ट गर्नुहोस्",
                labelSimpleArea: "कुल तल्ला क्षेत्रफल *",
                noteSimpleArea: "क्षेत्रफल वर्ग फिट प्रविष्ट गर्नुहोस्",
                labelSimpleQuality: "फिनिशिङको स्तर *",
                labelSimpleFinishing: "फर्निसिङको स्तर *",
                errorSimpleArea: "कृपया मान्य क्षेत्रफल प्रविष्ट गर्नुहोस् (न्यूनतम १०० वर्ग फिट वा मान्य आर-ए-पी-डी ढाँचा)",
                errorSimpleQuality: "कृपया पूर्णता गुणस्तर चयन गर्नुहोस्",
                errorSimpleFinishing: "कृपया पूर्णता प्रकार चयन गर्नुहोस्",
                
                // Method 2
                method2Title: "जग्गा क्षेत्र विधि - जग्गा विवरणबाट",
                method2Description: "जग्गा क्षेत्रफल, कभरेज प्रतिशत र तल्लाको संख्याको आधारमा गणना गर्नुहोस्",
                labelLandArea: "जग्गा क्षेत्रफल *",
                noteLandArea: "वर्ग फिट वा आर-ए  पी-डी ढाँचामा प्रविष्ट गर्नुहोस् (रोपनी-आना-पैसा-दाम)",
                labelCoverage: "कभरेज प्रतिशत (%) *",
                noteCoverage: "भवनले ढाक्ने जग्गाको प्रतिशत (१०-९०%)",
                labelStories: "तल्लाको संख्या *",
                labelLandQuality: "फिनिशिङको स्तर *",
                labelLandFinishing: "फर्निसिङको स्तर *",
                errorLandArea: "कृपया मान्य जग्गा क्षेत्रफल प्रविष्ट गर्नुहोस् (न्यूनतम १०० वर्ग फिट वा मान्य आर-ए-पी-डी ढाँचा)",
                errorCoverage: "कृपया १०-९०% को बीचमा कभरेज प्रविष्ट गर्नुहोस्",
                errorStories: "कृपया तल्लाको संख्या प्रविष्ट गर्नुहोस् (१-१०)",
                errorLandQuality: "कृपया पूर्णता गुणस्तर चयन गर्नुहोस्",
                errorLandFinishing: "कृपया पूर्णता प्रकार चयन गर्नुहोस्",
                
                // Method 3
                method3Title: "विस्तृत कोठा विधि - कोठा-दर-कोठा",
                method3Description: "सटीक गणनाको लागि विस्तृत कोठाको नाप प्रविष्ट गर्नुहोस्",
                labelDetailedStories: "तल्लाको संख्या *",
                noteDetailedStories: "सीढी क्षेत्रफल गणनाको लागि प्रयोग गरिन्छ",
                roomCountTitle: "कोठाको संख्या",
                labelBedroom: "बेडरूम",
                labelKitchen: "भान्छा",
                labelLivingroom: "बस्ने कोठा",
                labelGuestroom: "पाहुनाकोठा",
                labelToilet: "शौचालय",
                labelPujaroom: "पूजा कोठा",
                labelStaircase: "सीढी",
                labelPassage: "बाटो",
                roomDimensionsTitle: "कोठाको नाप (फिटमा)",
                tableHeaderRoom: "कोठाको प्रकार",
                tableHeaderLength: "लम्बाइ (फिट)",
                tableHeaderBreadth: "चौडाइ (फिट)",
                tableHeaderArea: "क्षेत्रफल (वर्ग फिट)",
                totalAreaLabel: "कुल क्षेत्रफल:",
                staircaseNote: "नोट: सीढीको क्षेत्रफल लम्बाइ × चौडाइ × तल्लाको संख्या को रूपमा गणना गरिन्छ",
                labelDetailedQuality: "फिनिशिङको स्तर *",
                labelDetailedFinishing: "फर्निसिङको स्तर *",
                errorDetailedStories: "कृपया तल्लाको संख्या प्रविष्ट गर्नुहोस् (१-१०)",
                errorDetailedQuality: "कृपया पूर्णता गुणस्तर चयन गर्नुहोस्",
                errorDetailedFinishing: "कृपया पूर्णता प्रकार चयन गर्नुहोस्",
                errorCommon: "कृपया कम्तिमा एउटा कोठा मान्य नापहरूसँग थप्नुहोस्",
                
                // Contact Information
                contactInfoTitle: "सम्पर्क जानकारी (वैकल्पिक)",
                contactInfoDescription: "यदि तपाईंलाई विस्तृत परामर्शको लागि हामीले सम्पर्क गर्ने हो भने तपाईंको विवरण प्रदान गर्नुहोस्",
                labelUserName: "तपाईंको नाम",
                labelUserEmail: "इमेल ठेगाना",
                labelUserPhone: "फोन नम्बर",
                
                // Buttons and Notes
                requiredNote: "* आवश्यक फिल्डहरू",
                calculateBtn: "लागत गणना गर्नुहोस्",
                calculatingBtn: "गणना गर्दै...",
                
                // Results Section
                resultTitle: "लागत विवरण",
                resultDescription: "तपाईंको परियोजनाको अनुमानित निर्माण लागत",
                breakdownTitle: "विस्तृत लागत विवरण",
                tableHeaderItem: "वस्तु विवरण",
                tableHeaderAmount: "रकम (रु.)",
                chartTitle: "लागत वितरण",
                totalLabel: "कुल अनुमानित लागत:",
                totalNote: "* यो एक अनुमानित अनुमान हो। अन्तिम लागत वास्तविक आवश्यकता र बजार अवस्थाको आधारमा फरक हुन सक्छ।",
                nextStepsTitle: "अर्को चरणहरू",
                nextStepsDescription: "विस्तृत डिजाइन, योजना र निर्माण सेवाहरूको लागि, हाम्रा विशेषज्ञहरूलाई सम्पर्क गर्नुहोस्:",
                
                // Success Message
                successTitle: "धन्यवाद!",
                successMessage1: "तपाईंको प्रतिक्रियाको लागि धन्यवाद। तपाईंको इनपुट रेकर्ड गरियो।",
                successMessage2: "तपाईंसँग चाँडै सम्पर्क गरिनेछ।",
                successContact: "प्रश्नहरूको लागि सम्पर्क गर्नुहोस्: ",
                successRedirect: "गृहपृष्ठमा पुनर्निर्देशन हुँदै ",
                
                // Calculation Table Items - Nepali
                calculationItems: {
                    "Preliminary consultation upto Naksa Pass": "प्रारम्भिक परामर्श (नक्सा पास सम्म)",
                    "Municipal work Charge": "नगरपालिका कार्य शुल्क",
                    "Site Clearance": "साइट खाली गर्ने कार्य",
                    "Excavation works": "खनन कार्य",
                    "Back Fill in Excavated Area and Soil Management Cost": "खनेको क्षेत्रमा माटो भर्ने र माटो व्यवस्थापन लागत",
                    "Compaction Works in foundations": "कम्प्याक्सन कार्य",
                    "Brick Soling in Footing and GF Level": "फुटिंग र भुइँ तल्लामा इँटा सोलिंग",
                    "PCC Works in Footing and GF Level": "फुटिंग र भुइँ तल्लामा पीसीसी कार्य",
                    "M20 concrete": "M२० कंक्रिट",
                    "Reinforcement": "रड",
                    "Shuttering Works": "सटरिंग कार्य",
                    "Door/window (wooden)": "ढोका/झ्याल (काठको)",
                    "Windows (UPVC)": "झ्याल (यूपीभीसी)",
                    "Brick Masonary": "इँटाको वाल",
                    "Plaster Works": "प्लास्टर कार्य",
                    "Screeding": "कोरा मसीनो",
                    "Boundary Wall": "सीमाना पर्खाल",
                    "Painting Works": "रङ–रोगन",
                    "Granite in Staircase and Others": "ग्रेनाइट",
                    "Tile in Kitchen, Terrace and Varandha": "भान्छा, टरेस र भरन्डामा टाइल",
                    "Over Head Watertank and stand": "कौसीको पानी ट्याङ्की र स्ट्याण्ड",
                    "Underground water tank (10000 ltr)": "जमिन मुनी को पानी ट्याङ्की (१०००० लिटर)",
                    "Railing": "रेलिंग",
                    "Metal Stair": "कौसीको भर्याङ",
                    "Main Gate": "मुख्य ढोका",
                    "Septic Tank and Soak Pit": "सेप्टिक ट्याङ्की र सोक पिट",
                    "False Ceiling": "फल्स सिलिंग",
                    "Electrical fittings": "बिजुली फिटिंग",
                    "Sanitary pipes and fittings": "धाराको पाइप र फिटिंग",
                    "Internal Furnishing": "फर्निसिङ"
                },
                
                // Pie Chart Categories - Nepali
                pieChartCategories: {
                    "Design and Naksa Pass": "डिजाइन र नक्सा पास",
                    "Civil Works": "सिभिल कार्य",
                    "Painting Works": "रंग कार्य",
                    "Tile/Granite": "टाइल/ग्रेनाइट",
                    "Water Tank": "पानी ट्याङ्की",
                    "Metal Works": "फलाम कार्य",
                    "Septic Tank/Soak Pit": "सेप्टिक ट्याङ्की/सोक पिट",
                    "False Ceiling": "फल्स सिलिंग",
                    "Electrical Works": "बिजुली कार्य",
                    "Sanitary Works": "धाराको कार्य",
                    "Furnishing Works": "फर्निसिङ कार्य"
                },
                
                // Dropdown options - Nepali
                qualityOptions: {
                    "1": "सरल",
                    "2": "मध्यम",
                    "3": "उच्च"
                },
                
                finishingOptions: {
                    "1": "केवल सिभिल कार्य",
                    "2": "आधा-फर्निसिङ",
                    "3": "पूर्ण फर्निसिङ"
                }
            }
        };

        // Current language
        let currentLanguage = 'en';

        // Initialize AOS
        AOS.init({
            duration: 800,
            once: true,
            offset: 100
        });

        // Set current year in footer
        document.getElementById('current-year').textContent = new Date().getFullYear();

        // Language selection
        document.getElementById('englishBtn').addEventListener('click', () => {
            selectLanguage('en');
        });

        document.getElementById('nepaliBtn').addEventListener('click', () => {
            selectLanguage('ne');
        });

        function selectLanguage(lang) {
            currentLanguage = lang;
            updateLanguage();
            updateDropdownOptions();
            
            // Set the language value in the hidden field
            document.getElementById('languageField').value = lang;
            
            hideLanguageModal();
            showMainContent();
        }

        function updateLanguage() {
            const t = translations[currentLanguage];
            
            // Update form section
            document.getElementById('form-subtitle').textContent = t.formSubtitle;
            document.getElementById('form-title').textContent = t.formTitle;
            document.getElementById('form-description').textContent = t.formDescription;
            
            // Update tabs
            document.getElementById('tab-1-title').textContent = t.tab1Title;
            document.getElementById('tab-1-subtitle').textContent = t.tab1Subtitle;
            document.getElementById('tab-2-title').textContent = t.tab2Title;
            document.getElementById('tab-2-subtitle').textContent = t.tab2Subtitle;
            document.getElementById('tab-3-title').textContent = t.tab3Title;
            document.getElementById('tab-3-subtitle').textContent = t.tab3Subtitle;
            
            // Update Method 1
            document.getElementById('method1-title').textContent = t.method1Title;
            document.getElementById('method1-description').textContent = t.method1Description;
            document.getElementById('label-simple-area').textContent = t.labelSimpleArea;
            document.getElementById('note-simple-area').textContent = t.noteSimpleArea;
            document.getElementById('label-simple-quality').textContent = t.labelSimpleQuality;
            document.getElementById('label-simple-finishing').textContent = t.labelSimpleFinishing;
            
            // Update Method 2
            document.getElementById('method2-title').textContent = t.method2Title;
            document.getElementById('method2-description').textContent = t.method2Description;
            document.getElementById('label-land-area').textContent = t.labelLandArea;
            document.getElementById('note-land-area').textContent = t.noteLandArea;
            document.getElementById('label-coverage').textContent = t.labelCoverage;
            document.getElementById('note-coverage').textContent = t.noteCoverage;
            document.getElementById('label-stories').textContent = t.labelStories;
            document.getElementById('label-land-quality').textContent = t.labelLandQuality;
            document.getElementById('label-land-finishing').textContent = t.labelLandFinishing;
            
            // Update Method 3
            document.getElementById('method3-title').textContent = t.method3Title;
            document.getElementById('method3-description').textContent = t.method3Description;
            document.getElementById('label-detailed-stories').textContent = t.labelDetailedStories;
            document.getElementById('note-detailed-stories').textContent = t.noteDetailedStories;
            document.getElementById('room-count-title').textContent = t.roomCountTitle;
            document.getElementById('label-bedroom').textContent = t.labelBedroom;
            document.getElementById('label-kitchen').textContent = t.labelKitchen;
            document.getElementById('label-livingroom').textContent = t.labelLivingroom;
            document.getElementById('label-guestroom').textContent = t.labelGuestroom;
            document.getElementById('label-toilet').textContent = t.labelToilet;
            document.getElementById('label-pujaroom').textContent = t.labelPujaroom;
            document.getElementById('label-staircase').textContent = t.labelStaircase;
            document.getElementById('label-passage').textContent = t.labelPassage;
            document.getElementById('room-dimensions-title').textContent = t.roomDimensionsTitle;
            document.getElementById('table-header-room').textContent = t.tableHeaderRoom;
            document.getElementById('table-header-length').textContent = t.tableHeaderLength;
            document.getElementById('table-header-breadth').textContent = t.tableHeaderBreadth;
            document.getElementById('table-header-area').textContent = t.tableHeaderArea;
            document.getElementById('total-area-label').textContent = t.totalAreaLabel;
            document.getElementById('staircase-note').textContent = t.staircaseNote;
            document.getElementById('label-detailed-quality').textContent = t.labelDetailedQuality;
            document.getElementById('label-detailed-finishing').textContent = t.labelDetailedFinishing;
            
            // Update Contact Information
            document.getElementById('contact-info-title').textContent = t.contactInfoTitle;
            document.getElementById('contact-info-description').textContent = t.contactInfoDescription;
            document.getElementById('label-user-name').textContent = t.labelUserName;
            document.getElementById('label-user-email').textContent = t.labelUserEmail;
            document.getElementById('label-user-phone').textContent = t.labelUserPhone;
            
            // Update buttons and notes
            document.getElementById('required-note').textContent = t.requiredNote;
            document.getElementById('required-note-2').textContent = t.requiredNote;
            document.getElementById('calculate-btn').textContent = t.calculateBtn;
            
            // Update Results Section
            document.getElementById('result-title').textContent = t.resultTitle;
            document.getElementById('result-description').textContent = t.resultDescription;
            document.getElementById('breakdown-title').textContent = t.breakdownTitle;
            document.getElementById('table-header-item').textContent = t.tableHeaderItem;
            document.getElementById('table-header-amount').textContent = t.tableHeaderAmount;
            document.getElementById('chart-title').textContent = t.chartTitle;
            document.getElementById('total-label').textContent = t.totalLabel;
            document.getElementById('total-note').textContent = t.totalNote;
            document.getElementById('next-steps-title').textContent = t.nextStepsTitle;
            document.getElementById('next-steps-description').textContent = t.nextStepsDescription;
            
            // Update success message
            document.getElementById('success-title').textContent = t.successTitle;
            document.getElementById('success-message-1').textContent = t.successMessage1;
            document.getElementById('success-message-2').textContent = t.successMessage2;
            document.getElementById('success-contact').innerHTML = t.successContact + '<strong>+977-9763683288</strong>';
            document.getElementById('success-redirect').textContent = t.successRedirect;
        }

        // Function to update dropdown options based on selected language
        function updateDropdownOptions() {
            const t = translations[currentLanguage];
            
            // Update quality dropdowns
            const qualitySelects = [
                'simple-quality', 'land-quality', 'detailed-quality'
            ];
            
            qualitySelects.forEach(selectId => {
                const select = document.getElementById(selectId);
                if (select) {
                    // Get current selected value
                    const currentValue = select.value;
                    
                    // Clear all options except first
                    select.innerHTML = '<option value="">' + (currentLanguage === 'ne' ? 'फिनिशिङको स्तर चयन गर्नुहोस्' : 'Select Quality') + '</option>';
                    
                    // Add translated options
                    if (currentLanguage === 'ne' && t.qualityOptions) {
                        Object.keys(t.qualityOptions).forEach(key => {
                            const option = document.createElement('option');
                            option.value = key;
                            option.textContent = t.qualityOptions[key];
                            select.appendChild(option);
                        });
                    } else {
                        // English options
                        const englishOptions = {
                            "1": "Simple",
                            "2": "Intermediate",
                            "3": "Luxury"
                        };
                        Object.keys(englishOptions).forEach(key => {
                            const option = document.createElement('option');
                            option.value = key;
                            option.textContent = englishOptions[key];
                            select.appendChild(option);
                        });
                    }
                    
                    // Restore selected value if any
                    if (currentValue) {
                        select.value = currentValue;
                    }
                }
            });
            
            // Update finishing dropdowns
            const finishingSelects = [
                'simple-finishing', 'land-finishing', 'detailed-finishing'
            ];
            
            finishingSelects.forEach(selectId => {
                const select = document.getElementById(selectId);
                if (select) {
                    // Get current selected value
                    const currentValue = select.value;
                    
                    // Clear all options except first
                    select.innerHTML = '<option value="">' + (currentLanguage === 'ne' ? 'फर्निसिङको स्तर चयन गर्नुहोस्' : 'Select Finishing Type') + '</option>';
                    
                    // Add translated options
                    if (currentLanguage === 'ne' && t.finishingOptions) {
                        Object.keys(t.finishingOptions).forEach(key => {
                            const option = document.createElement('option');
                            option.value = key;
                            option.textContent = t.finishingOptions[key];
                            select.appendChild(option);
                        });
                    } else {
                        // English options
                        const englishOptions = {
                            "1": "Civil Works Only",
                            "2": "Semi-Furnished",
                            "3": "Fully Furnished"
                        };
                        Object.keys(englishOptions).forEach(key => {
                            const option = document.createElement('option');
                            option.value = key;
                            option.textContent = englishOptions[key];
                            select.appendChild(option);
                        });
                    }
                    
                    // Restore selected value if any
                    if (currentValue) {
                        select.value = currentValue;
                    }
                }
            });
        }

        function hideLanguageModal() {
            const modal = document.getElementById('languageModal');
            modal.style.opacity = '0';
            modal.style.transform = 'scale(0.9)';
            setTimeout(() => {
                modal.style.display = 'none';
            }, 500);
        }

        function showMainContent() {
            document.getElementById('main-header').style.display = 'block';
            document.querySelector('main').style.display = 'block';
            document.querySelector('footer').style.display = 'block';
        }

        // Mobile nav toggle
        const navButton = document.getElementById('mobile-nav-button');
        const mobileNav = document.getElementById('mobile-nav');
        
        navButton.addEventListener('click', () => {
            mobileNav.classList.toggle('hidden');
        });

        // Tab Switching Logic
        document.querySelectorAll('.tab-button').forEach(button => {
            button.addEventListener('click', (e) => {
                e.preventDefault();
                const tabId = button.getAttribute('data-tab');
                
                // Update active tab button
                document.querySelectorAll('.tab-button').forEach(btn => {
                    btn.classList.remove('active');
                });
                button.classList.add('active');
                
                // Show active tab content
                document.querySelectorAll('.tab-content').forEach(content => {
                    content.classList.remove('active');
                });
                document.getElementById(tabId).classList.add('active');
                
                // Clear any existing error messages
                clearAllErrors();
            });
        });

        // Room dimensions data structure
        const roomTypes = [
            { id: 'bedroom', name: 'Bedroom', defaultLength: 12, defaultBreadth: 10 },
            { id: 'kitchen', name: 'Kitchen', defaultLength: 10, defaultBreadth: 8 },
            { id: 'livingroom', name: 'Living Room', defaultLength: 15, defaultBreadth: 12 },
            { id: 'guestroom', name: 'Guest Room', defaultLength: 10, defaultBreadth: 10 },
            { id: 'toilet', name: 'Toilet', defaultLength: 6, defaultBreadth: 4 },
            { id: 'pujaroom', name: 'Puja Room', defaultLength: 6, defaultBreadth: 6 },
            { id: 'staircase', name: 'Staircase', defaultLength: 10, defaultBreadth: 4 },
            { id: 'passage', name: 'Passage Way', defaultLength: 20, defaultBreadth: 4 }
        ];

        // Initialize room dimensions table
        function initializeRoomDimensions() {
            const tbody = document.getElementById('room-dimensions-body');
            tbody.innerHTML = '';
            
            roomTypes.forEach(room => {
                const count = parseInt(document.getElementById(`${room.id}-count`).value) || 0;
                
                for (let i = 1; i <= count; i++) {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${room.name} ${count > 1 ? i : ''}</td>
                        <td><input type="number" class="form-input w-full room-length" data-room="${room.id}" data-index="${i}" value="${room.defaultLength}" min="3"></td>
                        <td><input type="number" class="form-input w-full room-breadth" data-room="${room.id}" data-index="${i}" value="${room.defaultBreadth}" min="3"></td>
                        <td class="room-area">${room.defaultLength * room.defaultBreadth} sq.ft.</td>
                    `;
                    tbody.appendChild(row);
                }
            });
            
            calculateDetailedArea();
        }

        // Calculate total area for detailed method with special staircase calculation
        function calculateDetailedArea() {
            let totalArea = 0;
            
            document.querySelectorAll('.room-length').forEach(input => {
                const roomType = input.dataset.room;
                const length = parseFloat(input.value) || 0;
                const breadthInput = document.querySelector(`.room-breadth[data-room="${roomType}"][data-index="${input.dataset.index}"]`);
                const breadth = parseFloat(breadthInput.value) || 0;
                let area = 0;
                
                // Special calculation for staircase
                if (roomType === 'staircase') {
                    // Get number of stories from the detailed method stories input
                    let stories = 1;
                    const storiesInput = document.getElementById('detailed-stories');
                    if (storiesInput && !isNaN(parseInt(storiesInput.value))) {
                        stories = parseInt(storiesInput.value);
                    }
                    area = length * breadth * stories;
                } else {
                    area = length * breadth;
                }
                
                // Update area cell
                const row = input.closest('tr');
                row.querySelector('.room-area').textContent = `${area.toFixed(2)} sq.ft.`;
                
                totalArea += area;
            });
            
            document.getElementById('total-detailed-area').textContent = `${totalArea.toFixed(2)} sq.ft.`;
            return totalArea;
        }

        // Function to parse area input (supports both sq.ft. and R-A-P-D format)
        function parseAreaInput(areaInput) {
            if (!areaInput || areaInput.trim() === '') return 0;
            
            // Check if input is in R-A-P-D format (e.g., "1-2-3-4")
            const rapdPattern = /^(\d+)-(\d+)-(\d+)-(\d+)$/;
            const match = areaInput.match(rapdPattern);
            
            if (match) {
                // Convert R-A-P-D to sq.ft.
                const R = parseFloat(match[1]) || 0; // Ropani
                const A = parseFloat(match[2]) || 0; // Ana
                const P = parseFloat(match[3]) || 0; // Paisa
                const D = parseFloat(match[4]) || 0; // Dam
                
                // Conversion formula: area = R*5476 + A*342.25 + P*85.5625 + D*21.390625
                const area = (R * 5476) + (A * 342.25) + (P * 85.5625) + (D * 21.390625);
                return Math.round(area * 100) / 100; // Round to 2 decimal places
            } else {
                // Try to parse as regular number
                const num = parseFloat(areaInput.replace(/[^\d.]/g, ''));
                return isNaN(num) ? 0 : num;
            }
        }

        // Event listeners for room count changes
        roomTypes.forEach(room => {
            document.getElementById(`${room.id}-count`).addEventListener('change', initializeRoomDimensions);
        });

        // Event listeners for room dimension changes
        document.addEventListener('input', function(e) {
            if (e.target.classList.contains('room-length') || e.target.classList.contains('room-breadth')) {
                calculateDetailedArea();
            }
        });

        // ============ YOUR VARIABLES AND FORMULAS ============
        
        // Variable A: Total Building Area (calculated from user input)
        let A = 0;
        
        // Variable B: Quality of Finishing (1, 2, or 3)
        let B = 0;
        
        // Variable C: Finishing Type (1, 2, or 3)
        let C = 0;
        
        // Variable X: Coefficients for cost breakdown items
        const X = {
            // Serial 1-30 with your coefficients
            "Preliminary consultation upto Naksa Pass": 24.50,
            "Municipal work Charge": 15.00,
            "Site Clearance": 5.00,
            "Excavation works": 22.75,
            "Back Fill in Excavated Area and Soil Management Cost": 21.85,
            "Compaction Works in foundations": 5.00,
            "Brick Soling in Footing and GF Level": 9.39,
            "PCC Works in Footing and GF Level": 57.07,
            "M20 concrete": 459.96,
            "Reinforcement": 504.06,
            "Shuttering Works": 61.54,
            "Door/window (wooden)": 96.75,
            "Windows (UPVC)": 128.88,
            "Brick Masonary": 404.56,
            "Plaster Works": 78.12,
            "Screeding": 47.00,
            "Boundary Wall": 99.83,
            "Painting Works": 49.47,
            "Granite in Staircase and Others": 96.43,
            "Tile in Kitchen, Terrace and Varandha": 82.03,
            "Over Head Watertank and stand": 19.00,
            "Underground water tank (10000 ltr)": 93.72,
            "Railing": 52.80,
            "Metal Stair": 14.00,
            "Main Gate": 25.00,
            "Septic Tank and Soak Pit": 19.00,
            "False Ceiling": 14.48,
            "Electrical fittings": 135.78,
            "Sanitary pipes and fittings": 164.45,
            "Internal Furnishing": 65.28
        };
        
        // Original pie chart categories
        const pieChartCategoryKeys = {
            "Design and Naksa Pass": [0, 1],
            "Civil Works": [2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16],
            "Painting Works": [17],
            "Tile/Granite": [18, 19],
            "Water Tank": [20, 21],
            "Metal Works": [22, 23, 24],
            "Septic Tank/Soak Pit": [25],
            "False Ceiling": [26],
            "Electrical Works": [27],
            "Sanitary Works": [28],
            "Furnishing Works": [29]
        };

        // Calculate cost for each item using your formula
        function calculateItemCost(itemName, coefficient, index) {
            // Formula: X * A * (1 + B/10) for all items except Internal Furnishing
            // For Internal Furnishing: X * A * (1 + B/10) * ((C-1) + (C-1)/5)
            
            let amount = 0;
            
            if (itemName === "Internal Furnishing") {
                // Fixed formula for Internal Furnishing
                amount = coefficient * A * (1 + B/10) * ((C-1) + (C-1)/5);
            } else {
                // Standard formula for all other items
                amount = coefficient * A * (1 + B/10);
            }
            
            return Math.round(amount); // Round to nearest whole number
        }

        // Clear all error messages and borders
        function clearAllErrors() {
            document.querySelectorAll('.error-message').forEach(el => {
                el.style.display = 'none';
                el.textContent = '';
            });
            
            document.querySelectorAll('.form-input.error-border').forEach(el => {
                el.classList.remove('error-border');
            });
            
            document.getElementById('common-error').textContent = '';
        }

        // Show error for a specific field
        function showError(fieldId, message) {
            const errorElement = document.getElementById(`${fieldId}-error`);
            const inputElement = document.getElementById(fieldId);
            
            if (errorElement) {
                errorElement.textContent = message;
                errorElement.style.display = 'block';
            }
            
            if (inputElement) {
                inputElement.classList.add('error-border');
            }
            
            if (inputElement) {
                inputElement.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
        }

        // Validate form inputs
        function validateForm(activeTab) {
            clearAllErrors();
            let isValid = true;
            const t = translations[currentLanguage];
            
            if (activeTab === 'method1') {
                const totalArea = document.getElementById('simple-total-area').value;
                const quality = document.getElementById('simple-quality').value;
                const finishing = document.getElementById('simple-finishing').value;
                
                const parsedArea = parseAreaInput(totalArea);
                if (!totalArea || parsedArea < 100) {
                    showError('simple-total-area', t.errorSimpleArea);
                    isValid = false;
                }
                
                if (!quality) {
                    showError('simple-quality', t.errorSimpleQuality);
                    isValid = false;
                }
                
                if (!finishing) {
                    showError('simple-finishing', t.errorSimpleFinishing);
                    isValid = false;
                }
            } 
            else if (activeTab === 'method2') {
                const landArea = document.getElementById('land-area').value;
                const coverage = document.getElementById('coverage-percentage').value;
                const stories = document.getElementById('num-stories').value;
                const quality = document.getElementById('land-quality').value;
                const finishing = document.getElementById('land-finishing').value;
                
                const parsedArea = parseAreaInput(landArea);
                if (!landArea || parsedArea < 100) {
                    showError('land-area', t.errorLandArea);
                    isValid = false;
                }
                
                if (!coverage || parseFloat(coverage) < 10 || parseFloat(coverage) > 90) {
                    showError('coverage-percentage', t.errorCoverage);
                    isValid = false;
                }
                
                if (!stories || parseFloat(stories) < 1 || parseFloat(stories) > 10) {
                    showError('num-stories', t.errorStories);
                    isValid = false;
                }
                
                if (!quality) {
                    showError('land-quality', t.errorLandQuality);
                    isValid = false;
                }
                
                if (!finishing) {
                    showError('land-finishing', t.errorLandFinishing);
                    isValid = false;
                }
            } 
            else if (activeTab === 'method3') {
                const stories = document.getElementById('detailed-stories').value;
                const totalArea = calculateDetailedArea();
                const quality = document.getElementById('detailed-quality').value;
                const finishing = document.getElementById('detailed-finishing').value;
                
                if (!stories || parseFloat(stories) < 1 || parseFloat(stories) > 10) {
                    showError('detailed-stories', t.errorDetailedStories);
                    isValid = false;
                }
                
                if (totalArea <= 0) {
                    document.getElementById('common-error').textContent = t.errorCommon;
                    document.getElementById('common-error').style.display = 'block';
                    isValid = false;
                }
                
                if (!quality) {
                    showError('detailed-quality', t.errorDetailedQuality);
                    isValid = false;
                }
                
                if (!finishing) {
                    showError('detailed-finishing', t.errorDetailedFinishing);
                    isValid = false;
                }
            }
            
            return isValid;
        }

        // Format currency
        function formatCurrency(amount) {
            return new Intl.NumberFormat('en-IN', {
                style: 'currency',
                currency: 'NPR',
                maximumFractionDigits: 0
            }).format(amount);
        }

        // Display detailed cost breakdown table
        function displayDetailedBreakdown(itemCosts, totalCost) {
            const tbody = document.getElementById('detailed-breakdown-body');
            tbody.innerHTML = '';
            
            const t = translations[currentLanguage];
            const itemNames = Object.keys(X);
            
            let rowIndex = 0;
            for (const [originalItemName, coefficient] of Object.entries(X)) {
                const amount = itemCosts[rowIndex];
                // Use translated item name if available, otherwise use original
                const displayName = t.calculationItems[originalItemName] || originalItemName;
                
                const row = document.createElement('tr');
                row.className = 'animate-slideUp';
                row.style.animationDelay = `${rowIndex * 0.03}s`;
                row.style.opacity = '0';
                
                row.innerHTML = `
                    <td class="text-base lg:text-lg">${displayName}</td>
                    <td class="font-semibold text-brand-primary text-base lg:text-lg">${formatCurrency(amount)}</td>
                `;
                
                tbody.appendChild(row);
                rowIndex++;
            }
            
            // Update total cost
            document.getElementById('total-cost').textContent = formatCurrency(totalCost);
            
            // Animate rows one by one
            setTimeout(() => {
                const rows = tbody.querySelectorAll('tr');
                rows.forEach((row, index) => {
                    setTimeout(() => {
                        row.style.opacity = '1';
                    }, index * 30);
                });
            }, 100);
        }

        // Calculate pie chart data with translated labels
        function calculatePieChartData(itemCosts) {
            const pieData = {};
            const pieDataAmounts = {};
            const t = translations[currentLanguage];
            
            // Initialize all categories to 0
            for (const [originalCategory, indices] of Object.entries(pieChartCategoryKeys)) {
                // Use translated category name if available, otherwise use original
                const displayCategory = t.pieChartCategories[originalCategory] || originalCategory;
                pieData[displayCategory] = 0;
                pieDataAmounts[displayCategory] = 0;
            }
            
            // Sum costs for each category
            for (const [originalCategory, indices] of Object.entries(pieChartCategoryKeys)) {
                const displayCategory = t.pieChartCategories[originalCategory] || originalCategory;
                indices.forEach(index => {
                    if (itemCosts[index]) {
                        pieData[displayCategory] += itemCosts[index];
                        pieDataAmounts[displayCategory] = pieData[displayCategory];
                    }
                });
            }
            
            return { labels: Object.keys(pieData), data: Object.values(pieData), amounts: pieDataAmounts };
        }

        // Create animated pie chart
        function createAnimatedPieChart(pieData) {
            const ctx = document.getElementById('costPieChart').getContext('2d');
            
            // Destroy existing chart if it exists
            if (window.costChart) {
                window.costChart.destroy();
            }
            
            // Prepare data
            const labels = pieData.labels;
            const data = pieData.data;
            const amounts = pieData.amounts;
            
            // Modern color palette
            const colors = [
                '#305350', '#4a8c87', '#63c4bd', '#ea9c26', '#ffb74d',
                '#a7846a', '#c4a484', '#8bc34a', '#cddc39', '#ff9800',
                '#2196f3'
            ];
            
            // Create chart with animations
            window.costChart = new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: labels,
                    datasets: [{
                        data: data,
                        backgroundColor: colors.slice(0, labels.length),
                        borderWidth: 3,
                        borderColor: '#ffffff',
                        hoverBorderWidth: 4,
                        hoverBorderColor: '#f8fafc',
                        hoverOffset: 15
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            backgroundColor: 'rgba(48, 83, 80, 0.9)',
                            titleColor: '#ffffff',
                            bodyColor: '#ffffff',
                            borderColor: '#ffffff',
                            borderWidth: 1,
                            cornerRadius: 8,
                            callbacks: {
                                label: function(context) {
                                    const label = context.label || '';
                                    const value = context.raw || 0;
                                    const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                    const percentage = Math.round((value / total) * 100);
                                    return `${label}: ${formatCurrency(value)} (${percentage}%)`;
                                }
                            }
                        }
                    },
                    animation: {
                        animateScale: true,
                        animateRotate: true,
                        duration: 2000,
                        easing: 'easeOutQuart'
                    },
                    transitions: {
                        active: {
                            animation: {
                                duration: 1000
                            }
                        }
                    }
                }
            });
            
            // Create custom legend with amounts
            createCustomLegend(pieData, colors);
            
            // Add floating animation to chart container
            const chartContainer = document.querySelector('.pie-chart-wrapper');
            chartContainer.classList.add('animate-float');
        }

        // Create custom legend with amounts
        function createCustomLegend(pieData, colors) {
            const legendContainer = document.getElementById('chart-legend');
            legendContainer.innerHTML = '';
            
            pieData.labels.forEach((label, index) => {
                const amount = pieData.data[index];
                
                const legendItem = document.createElement('div');
                legendItem.className = 'legend-item animate-fadeIn';
                legendItem.style.animationDelay = `${index * 0.1}s`;
                legendItem.style.opacity = '0';
                
                legendItem.innerHTML = `
                    <div class="legend-info">
                        <div class="legend-color" style="background-color: ${colors[index]}"></div>
                        <div class="legend-name">${label}</div>
                    </div>
                    <div class="legend-amount">${formatCurrency(amount)}</div>
                `;
                
                legendContainer.appendChild(legendItem);
                
                // Animate legend items
                setTimeout(() => {
                    legendItem.style.opacity = '1';
                }, 100 + (index * 100));
            });
        }

        // Show loading overlay
        function showLoading() {
            document.getElementById('loading-overlay').style.display = 'flex';
        }

        // Hide loading overlay
        function hideLoading() {
            document.getElementById('loading-overlay').style.display = 'none';
        }

        // Show success message and redirect
        function showSuccessMessage() {
            const mainFormContainer = document.getElementById('main-form-container');
            const successMessage = document.getElementById('success-message');
            const resultContainer = document.getElementById('result-container');
            
            // Hide all forms and results
            mainFormContainer.style.display = 'none';
            resultContainer.style.display = 'none';
            successMessage.style.display = 'block';
            
            // Start countdown for redirect
            let countdown = 5;
            const countdownElement = document.getElementById("countdown");
            
            // Clear any existing interval first
            if (window.redirectInterval) {
                clearInterval(window.redirectInterval);
            }
            
            window.redirectInterval = setInterval(() => {
                countdown--;
                if (countdownElement) {
                    countdownElement.textContent = countdown;
                }
                
                if (countdown <= 0) {
                    clearInterval(window.redirectInterval);
                    window.location.href = "index.html";
                }
            }, 1000);
        }

        // Submit data to Google Sheets with language-specific field labels
        async function submitToGoogleSheets(formData) {
            try {
                // Google Apps Script URL
                const scriptURL = 'https://script.google.com/macros/s/AKfycbyPuTotSZHLm-HMppnlidaR1xmstNUQ1tzbG60ENKrUPfBmPJl8eXdsCRhaVD_4lCvXVA/exec';
                
                // Create FormData object
                const formDataObj = new FormData();
                formDataObj.append('timestamp', formData.timestamp);
                formDataObj.append('method', formData.method);
                formDataObj.append('A', formData.A);
                formDataObj.append('B', formData.B);
                formDataObj.append('C', formData.C);
                formDataObj.append('name', formData.name || 'Not provided');
                formDataObj.append('email', formData.email || 'Not provided');
                formDataObj.append('phone', formData.phone || 'Not provided');
                formDataObj.append('totalCost', formData.totalCost);
                formDataObj.append('language', currentLanguage);
                
                // Add language-specific field labels
                if (currentLanguage === 'ne') {
                    formDataObj.append('method_ne', 'विधि');
                    formDataObj.append('A_ne', 'कुल क्षेत्रफल');
                    formDataObj.append('B_ne', 'गुणस्तर');
                    formDataObj.append('C_ne', 'पूर्णता प्रकार');
                    formDataObj.append('name_ne', 'नाम');
                    formDataObj.append('email_ne', 'इमेल');
                    formDataObj.append('phone_ne', 'फोन');
                    formDataObj.append('totalCost_ne', 'कुल लागत');
                    formDataObj.append('language_note', 'यो अनुरोध नेपाली भाषामा पेश गरिएको थियो');
                } else {
                    formDataObj.append('method_en', 'Method');
                    formDataObj.append('A_en', 'Total Area');
                    formDataObj.append('B_en', 'Quality Level');
                    formDataObj.append('C_en', 'Finishing Type');
                    formDataObj.append('name_en', 'Name');
                    formDataObj.append('email_en', 'Email');
                    formDataObj.append('phone_en', 'Phone');
                    formDataObj.append('totalCost_en', 'Total Cost');
                    formDataObj.append('language_note', 'This request was submitted in English language');
                }
                
                // Submit to Google Sheets - using no-cors mode to avoid CORS issues
                const response = await fetch(scriptURL, {
                    method: 'POST',
                    body: formDataObj,
                    mode: 'no-cors'
                });
                
                console.log('Data submitted to Google Sheets successfully');
                return true;
            } catch (error) {
                console.log('Data submission completed (may have CORS limitations)');
                return true; // Always return true to not break user experience
            }
        }

        // Main calculate function
        async function calculate() {
            event.preventDefault();
            
            const activeTab = document.querySelector('.tab-button.active').getAttribute('data-tab');
            const calculateBtn = document.getElementById('calculate-btn');
            const t = translations[currentLanguage];
            
            // Validate form first
            if (!validateForm(activeTab)) {
                return;
            }
            
            // Show submitting state
            calculateBtn.disabled = true;
            calculateBtn.innerHTML = `<span class="spinner"></span>${t.calculatingBtn}`;
            
            // ============ SET VARIABLE A ============
            if (activeTab === 'method1') {
                // Method 1: Direct input with R-A-P-D conversion
                const areaInput = document.getElementById('simple-total-area').value;
                A = parseAreaInput(areaInput);
            } 
            else if (activeTab === 'method2') {
                // Method 2: Land area * coverage percentage * number of stories / 100
                const landAreaInput = document.getElementById('land-area').value;
                const landArea = parseAreaInput(landAreaInput);
                const coverage = parseFloat(document.getElementById('coverage-percentage').value) || 0;
                const stories = parseFloat(document.getElementById('num-stories').value) || 0;
                A = (landArea * coverage * stories) / 100;
            } 
            else if (activeTab === 'method3') {
                // Method 3: Calculated total area from detailed method
                A = calculateDetailedArea();
            }
            
            // ============ SET VARIABLE B ============
            if (activeTab === 'method1') {
                B = parseFloat(document.getElementById('simple-quality').value) || 0;
            } else if (activeTab === 'method2') {
                B = parseFloat(document.getElementById('land-quality').value) || 0;
            } else if (activeTab === 'method3') {
                B = parseFloat(document.getElementById('detailed-quality').value) || 0;
            }
            
            // ============ SET VARIABLE C ============
            if (activeTab === 'method1') {
                C = parseFloat(document.getElementById('simple-finishing').value) || 0;
            } else if (activeTab === 'method2') {
                C = parseFloat(document.getElementById('land-finishing').value) || 0;
            } else if (activeTab === 'method3') {
                C = parseFloat(document.getElementById('detailed-finishing').value) || 0;
            }
            
            // ============ CALCULATE COSTS ============
            const itemCosts = [];
            let totalCost = 0;
            
            // Calculate cost for each item
            let index = 0;
            for (const [itemName, coefficient] of Object.entries(X)) {
                const amount = calculateItemCost(itemName, coefficient, index);
                itemCosts.push(amount);
                totalCost += amount;
                index++;
            }
            
            // ============ DISPLAY RESULTS ============
            // Show result container
            const resultContainer = document.getElementById('result-container');
            resultContainer.style.display = 'block';
            
            // Display detailed breakdown table
            displayDetailedBreakdown(itemCosts, totalCost);
            
            // Calculate and display pie chart
            const pieData = calculatePieChartData(itemCosts);
            createAnimatedPieChart(pieData);
            
            // Get user information
            const name = document.getElementById('user-name').value;
            const email = document.getElementById('user-email').value;
            const phone = document.getElementById('user-phone').value;
            
            // Prepare data for Google Sheets
            const formData = {
                timestamp: new Date().toISOString(),
                method: activeTab,
                A: A,
                B: B,
                C: C,
                name: name,
                email: email,
                phone: phone,
                totalCost: totalCost
            };
            
            // Log variables for debugging
            console.log('Calculation Variables:', {
                A: A,
                B: B,
                C: C,
                TotalArea: A,
                QualityLevel: B,
                FinishingType: C,
                TotalCost: totalCost,
                UserName: name,
                UserEmail: email,
                UserPhone: phone,
                Language: currentLanguage
            });
            
            // Submit to Google Sheets with language information
            await submitToGoogleSheets(formData);
            
            // Reset button state
            calculateBtn.disabled = false;
            calculateBtn.textContent = t.calculateBtn;
            
            // Scroll to results
            setTimeout(() => {
                resultContainer.scrollIntoView({ behavior: 'smooth' });
            }, 100);
        }

        // Calculate button event
        document.getElementById('calculate-btn').addEventListener('click', function(e) {
            e.preventDefault();
            calculate();
        });

        // Initialize page
        document.addEventListener('DOMContentLoaded', () => {
            // Show language modal on page load
            const languageModal = document.getElementById('languageModal');
            if (languageModal) {
                languageModal.style.display = 'flex';
            }
            
            initializeRoomDimensions();
            
            // Initialize dropdowns with English by default
            updateDropdownOptions();
            
            // Prevent form submissions on Enter key
            document.querySelectorAll('form').forEach(form => {
                form.addEventListener('submit', function(e) {
                    e.preventDefault();
                });
            });
            
            // Clear errors on input
            document.querySelectorAll('.form-input').forEach(input => {
                input.addEventListener('input', function() {
                    const errorId = this.id + '-error';
                    const errorElement = document.getElementById(errorId);
                    if (errorElement) {
                        errorElement.style.display = 'none';
                        errorElement.textContent = '';
                    }
                    this.classList.remove('error-border');
                });
            });
        });
    </script>

</body>
</html>
